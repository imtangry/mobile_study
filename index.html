<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>京东</title>
    <link rel="stylesheet" href="./css/common.css">
    <link rel="stylesheet" href="./css/index.css">
</head>

<body>
<div class="jd_layout">
    <!-- 头部搜索 -->
    <header class="jd_search">
        <a href="#" class="jd_logo fl"></a>
        <form action="" class="jd_search_box">
            <input type="text" placeholder="请输入商品名称" class="search">
        </form>
        <a href="#" class="jd_login fr">登录</a>
    </header>

    <!-- 轮播图 -->
    <div class="jd_banner">
        <ul class="jd_banner_imgs clear">
            <li>
                <a href="#">1
                    <img src="./img/lun/a1.dpg.webp" alt="">
                </a>
            </li>
            <li>
                <a href="#">2
                    <img src="./img/lun/a2.dpg.webp" alt="">
                </a>
            </li>
            <li>
                <a href="#">3
                    <img src="./img/lun/a3.dpg.webp" alt="">
                </a>
            </li>
            <li>
                <a href="#">4
                    <img src="./img/lun/a4.jpg.dpg.webp" alt="">
                </a>
            </li>
            <li>
                <a href="#">5
                    <img src="./img/lun/a5.jpg.dpg.webp" alt="">
                </a>
            </li>
            <li>
                <a href="#">6
                    <img src="./img/lun/a6.jpg.dpg.webp" alt="">
                </a>
            </li>
            <li>
                <a href="#">7
                    <img src="./img/lun/a7.jpg.dpg.webp" alt="">
                </a>
            </li>
            <li>
                <a href="#">8
                    <img src="./img/lun/a4.jpg.dpg.webp" alt="">
                </a>
            </li>
        </ul>
        <!-- <div class="flex_content"> -->
        <ul class="jd_banner_pointer">
            <li class="pointer active"></li>
            <li class="pointer"></li>
            <li class="pointer"></li>
            <li class="pointer"></li>
            <li class="pointer"></li>
            <li class="pointer"></li>
            <li class="pointer"></li>
            <li class="pointer"></li>
        </ul>
        <!-- </div> -->


    </div>

    <!-- 导航 -->
    <div class="jd_nav">
        <ul class="jd_nav_ul clear">
            <li class="jd_nav_item">
                <a href="#">
                    <img src="./img/nav/n2.png" alt="">
                    <span>商品分类</span>
                </a>
            </li>
            <li class="jd_nav_item">
                <a href="#">
                    <img src="./img/nav/n3.png" alt="">
                    <span>商品分类</span>
                </a>
            </li>
            <li class="jd_nav_item">
                <a href="#">
                    <img src="./img/nav/n4.png" alt="">
                    <span>商品分类</span>
                </a>
            </li>
            <li class="jd_nav_item">
                <a href="#">
                    <img src="./img/nav/n5.png" alt="">
                    <span>商品分类</span>
                </a>
            </li>
            <li class="jd_nav_item">
                <a href="#">
                    <img src="./img/nav/n6.png" alt="">
                    <span>商品分类</span>
                </a>
            </li>
            <li class="jd_nav_item">
                <a href="#">
                    <img src="./img/nav/n7.png" alt="">
                    <span>商品分类</span>
                </a>
            </li>
            <li class="jd_nav_item">
                <a href="#">
                    <img src="./img/nav/n8.png" alt="">
                    <span>商品分类</span>
                </a>
            </li>
            <li class="jd_nav_item">
                <a href="#">
                    <img src="./img/nav/n9.png" alt="">
                    <span>商品分类</span>
                </a>
            </li>
        </ul>
    </div>
    <!-- 商品 -->
    <div class="jd_product clear">
        <div class="jd_product_title">
            <span></span>京东超市
        </div>
        <div class="jdp_l fl">
            <a href="#">
                <img src="./img/product/left1.png" alt="">
            </a>
        </div>
        <div class="jdp_r fl">
            <a href="#">
                <img src="./img/product/right1.png" alt="">
            </a>
            <a href="#">
                <img src="./img/product/right2.png" alt="">
            </a>
        </div>
    </div>
    <div class="jd_product clear">
        <div class="jd_product_title">
            <span></span>京东超市
        </div>
        <div class="jdp_l fl">
            <a href="#">
                <img src="./img/product/left1.png" alt="">
            </a>
        </div>
        <div class="jdp_r fl">
            <a href="#">
                <img src="./img/product/right1.png" alt="">
            </a>
            <a href="#">
                <img src="./img/product/right2.png" alt="">
            </a>
        </div>
    </div>
</div>

<script src="./js/zepto/zepto.min.js"></script>
<script src="./js/zepto/touch.js"></script>
<script src="./js/zepto/selector.js"></script>
<script src="./js/zepto/fx.js"></script>


<!--使用zepto实现触摸事件-->
<script !src="">
    $(".jd_nav>.jd_nav_ul>.jd_nav_item>a").on("tap", function () {
        console.log("触摸事件");
    })

    $(function () {
        var banner = $(".jd_banner");
        var banner_width = banner.width();
        var img_box = banner.find("ul:first-of-type");
        var pointers = banner.find("ul:eq(1)").find("li");
        var first = img_box.find("li:first-of-type");
        var last = img_box.find("li:last-of-type");
        // 头尾加一个图片，防止循环轮播出现空白，那么样式需要改一下下
        img_box.append(first.clone());
        last.clone().insertBefore(first);
        // 图片索引，因为第一张图片是复制的，所以从1开始
        var index =1;
        var list = img_box[0].getElementsByTagName("li").length;
        img_box.css("left", -index * banner_width);
        var timer;
        console.log(list);
        console.log(pointers);
        function turn() {

            // if (index == list) {
            //     index = 0;
            // }else if(index==-1){
            //     index
            // }
            // img_box.animate(
            //     {"left": -index * banner_width}, 200, "ease-in-out", function () {
            // })

            img_box.animate({"left": -index * banner_width}, 200, "ease-in-out", function () {
                
                // 动画完结时执行判断，可以包含自动轮播，滑动的情况
                if (index == list-1) {
                    index = 1;
                    img_box.css("left", -index * banner_width);
                } else if (index == 0) {
                    index = list-2;
                    img_box.css("left", -index * banner_width);
                }
                pointers[index-1].classList.add("active");
            })
        }

        timer = setInterval(function () {
            pointers[index-1].classList.remove("active");
            index++;
            // pointers[index-1].classList.add("active");
            turn();
        }, 2000);

        img_box.on("swipeLeft", function () {
            clearInterval(timer);
            pointers[index-1].classList.remove("active");
            index++;
            // pointers[index-1].classList.add("active");
            turn();
        })
        img_box.on("swipeRight", function () {
            clearInterval(timer);
            pointers[index-1].classList.remove("active");
            index--;
            // pointers[index-1].classList.add("active");
            turn();
        })
    })


</script>
</body>

</html>